<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mountains</title>
<!-- FIRST LOAD ALL THE MOUNTAIANS LIKE THIS--> 
<script src="./scripts/mountainData.js"></script>

</head>
<body>
    <hr>Mountains</h1>
    <!-- THIRD MAKE A PLACE FOR THE MOUNTAIN LIST AND A DEFAULT OPTION -->
    <select id="list"><option value="">select a Mountain</option>option></select>
    <!-- FIFTH ADD TARGET FOR RESULTS -->
    <p id="result"></p>
</body>
<script>
    // SECOND MAKE SUR DATA IS LOADED LIKE THIS
    document.body.innerHTML += mountainsArray.length; //e should see 48 in the show preview

    // FOURTH LOOP THROUGH ALL DATA AND ADD A NEW OPTION FOR  EACH TO THE SELECT
    mountainsArray.forEach (mountain => { //USE EACH METHOD OF THE DATA TO GET 1 AT A TIME IN ARROW FUNCTION
    const option = document.createElement("option"); //CREATE BLANK OPTION ELEMENT
option.innerHTML = mountain.name; //SET DISPLAY OPTION CONTENT TO NAME
list.appendChild(option); // PLACE OPTION IN SELECT LIST
}); //END FOR EACH

// SIXTH - LISTEN FOR LIST CHANGE SELECTION
list.addEventListener("change", event=>{
    let mountain = mountainsArray.find(m=>m.name == event.target.value); //FIND DATA
    result.innerHTML = `<h1>${mountain.name}</h1>`; //SHOW RESULTS
    result.innerHTML +=mountain.desc
    result.innerHTML += `<h3>${mountain.elevation}</3h>`;
    result.innerHTML += `<img src="./images/${mountain.img}">`;
}); //END LISTENER
// Function to fetch sunset/sunrise times
async function getSunsetForMountain(lat, lng) {
    let response = await fetch(`https://api.sunrise-sunset.org/json?lat=${lat}&lng=${lng}&date=today`);
    let data = await response.json();
    return data.results;
}

// Display mountain information and sunrise/sunset times
async function displayMountainInfo() {
    const mountainInfoElement = document.getElementById("mountain-info");

    // Display mountain image
    mountainInfoElement.innerHTML = `<img src="${mountainsArray.image}" alt="${mountain.name}">`;

    // Fetch and display sunrise/sunset times
    try {
        const { sunrise, sunset } = await getSunsetForMountain(mountain.lat, mountain.lng);
        mountainInfoElement.innerHTML += `<p>${mountain.name}</p>`;
        mountainInfoElement.innerHTML += `<p>Sunrise: ${sunrise}</p>`;
        mountainInfoElement.innerHTML += `<p>Sunset: ${sunset}</p>`;
    } catch (error) {
        console.error("Error fetching sunrise/sunset times", error);
        mountainInfoElement.innerHTML += `<p>Error fetching sunrise/sunset times</p>`;
    }
}

// Call the function to display mountain information
displayMountainInfo();



 </script>   
</html>
